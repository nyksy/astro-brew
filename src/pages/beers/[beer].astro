---
import BasicHero from '../../components/BasicHero.astro'
import Container from '../../components/Container.astro'
import Section from '../../components/Section.astro'
import DefaultLayout from '../../layouts/default.astro'
import { API } from '../../utils/constants'

const { beer } = Astro.request.params

export async function getStaticPaths() {
  const paths = []

  for (let i = 0; i <= 325; i++) {
    paths.push({ params: { beer: i.toString() } })
  }

  return paths
}

const response = await fetch(API.BEERS + beer)
const beerdata = await response.json()

const selectedBeer = beerdata[0]

const title = selectedBeer?.name
const description = ''
---

<DefaultLayout content={{ title, description }}>
  <BasicHero>
    <h1 class="display-2 fw-bolder text-white text-uppercase">
      {selectedBeer?.name}
    </h1>
    <h3 class="text-white mb-4">
      {selectedBeer?.tagline}
      <span class="badge rounded-pill bg-primary me-1">
        {selectedBeer?.abv} %
      </span>
      <span class="badge rounded-pill bg-primary">
        {selectedBeer?.first_brewed}
      </span>
    </h3>
  </BasicHero>

  <Container>
    <Section>
      <div
        class="col-12 col-sm-8 col-lg-6 text-center bg-primary p-4 beer-card"
      >
        <img
          src={selectedBeer?.image_url}
          class="d-block mx-auto"
          alt={selectedBeer?.name}
          height="500"
          loading="lazy"
        />
      </div>
      <div class="col-lg-6 text-start">
        <h2 class="display-5 fw-bold lh-1 mb-3 text-white">Description</h2>

        <p class="lead text-white text-justify">
          {selectedBeer?.description}
        </p>

        <h2 class="display-5 fw-bold lh-1 mb-3 text-white">Brewer's tips</h2>

        <p class="lead text-white">
          {selectedBeer?.brewers_tips}
        </p>
      </div>
    </Section>
  </Container>
</DefaultLayout>
